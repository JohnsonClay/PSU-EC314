{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Time Value of Money\"\nauthor: \"James Woods\"\ndate: ''\noutput:\n  beamer_presentation: default\n  ioslides_presentation: default\n  slidy_presentation: default\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = FALSE)\noptions(scipen=999)\n\nAcc<-function(x){format(x,nsmall=2,digits=2,big.mark=',',scientific=FALSE)}\npgivena<-function(a,i,n){a*((1+i)^n -1)/(i*(1+i)^n)}\npgiveng<-function(g,i,n){g*( (1+i)^n -(i*n) -1  )/(i^2*(1+i)^n)}\nagivenp<-function(p,i,n){p*(i*(1+i)^n)/((1+i)^n -1)}\npgivengrow<-function(a1,g,i,n){a1*(1-(1+g)^n*(1+i)^(-n))/(i-g)}\n\n\nfgivena<-function(a,i,n){pgivena(a,i,n)*(1+i)^n}\nfgiveng<-function(g,i,n){pgiveng(g,i,n)*(1+i)^n}\n\nsource(\"TVM.R\")\n```\n\n## Time Value of Money Goals\n\n+ Create a logical basis for comparing costs and benefits in different time periods.\n+ Introduce a common notation that engineers, and many economists use, for these calculations.\n+ Set the basis for:\n    + Loans \n    + Investment criteria\n    \n## Assumptions\n\nThese are demonstrably false but give us tractable methods.\n\n+ Costs and benefits of equal size have equal value in all time periods. _Can evaluate without worrying about wealth or taste changes._\n+ The value of costs and benefits is independent of costs and benefits  in other time periods. _No habit, addiction or hangovers._\n+ Benefits offset costs. _Ever fought a parking ticket?_\n+ Future values are known with certainty. _Math is easy_\n\n## What it looks like\n\n$$\\sum x_n d(n)$$\n\n+ $d(n)$ is a discounting function.  \n+ Many are possible but only a few are time consistent.\n    + $d(n) = \\frac{1}{(1+r)^n}$ for discrete time.\n    + $d(n) = \\frac{1}{e^{r n}}$ for continuous time.\n    \n## Example of Time Inconsistency\n\nBack in the day I did this in class with real beer.  Now, it's a policy violation.\n\n+ Chose 6-pack of beer a month and a day from now or 1 beer a month from now.\n+ A beer right now or a 6-pack tomorrow.\n+ Many of you changed your mind.\n\n\n## Integer time\n\n+ Will say \"Time 1\", \"Time zero\" because \"1st time period is confusing\"\n+ \"Now\" means time zero.\n+ Intervals are half open on the right, e.g., $[0,1)$\n+ Jan 1, 1908 and Dec 31, 1908 are in the same period, but Jan 1, 1909 is not, when the unit of analysis is a year.\n\n## Notes on the interest rate\n\n+ We will treat the interest rate as a simple  thing until loans.\n+ The rate is always just the per period rate.\n+ Later we will get into:\n    + The nominal period.\n    + Compounding period.\n    + Nominal statement.\n    + Effective interest rates.\n\n## Time Consistent  Integer Time Discounting\n\n$$F= P (1+i)^N$$\n\nSymbolic notation depends on context.\n\n+ i = The interest rate\n+ P = Present worth *or* some value in time zero.\n+ N = N time periods from Now *or* Time N\n+ F = Future Value *or* Present Value in time N *or* A value in time N.\n\nWe will have a full list later.\n\n## Easy Future Value Calculation\n\n\"If you deposit  $26 into an account that earns 2% a month, how much will be in the account after 500 months?\"\n\n$$F = 26(1+.02)^{500} = `r 26*(1+.02)^500`$$\n\n+ \"how much will be in the account after\" is a good signal for future value.\n+ 100ths of a percent is more than adequate for calculations.\n+ Usually, cents is close enough.\n+ D2L questions have a tolerance.\n+ Most common mistakes:\n    + $26(1+.02)^{500/12}$\n    + $26(1+.2)^{500}$\n\n## Easy Present Worth Calculation\n\n\"How much would you have to deposit now into an account that earns 10% per year to have 100K in 10 years?\"\n\n$$P = \\frac{100K}{(1+.1)^{10}} = `r 100/1.1^10`K$$\n\n+ \"How much would you have to deposit now\" is a present worth indicator.\n\n## Graphical Notation\n\n![](Sketch.png)\n\n\n## Comments on Graphical Notation\n\n+ Up vectors are cash inflow.  \n+ Down are cash outflow.\n+ Magnitude is size of cash flows.\n+ Cash flow in any period is $A_n$.\n\n## Symbols Used in Symbolic (Factor) Notation\n\n+ $A_n$ = Cost or benefit in time n\n+ $n$ = Arbitrary time period\n+ $N$ = Usually but not always the last time period\n+ $P$ = Present worth in time zero\n+ $P_n$ = Present worth in time n.\n+ $A$ = Used in constant series to indicate same value for time 1 to N.\n+ $G$ = Used in linear gradient series to indicate the change in cash flow from time 1 to N.\n+ $g$ = Used in geometric gradient series to indicate the percent change in cash flow  from time 1 to N.\n\n## What is factor notation?\n\nIt is a functional representation of common cash flow patterns:\n\n+ Constant Series, $A_{n+1} = A_n, \\forall n = 1 \\dots N$\n+ Linear Gradient, $A_{n+1} = A_n + G, A_1=0, \\forall n = 1 \\dots N$\n+ Geometric Gradient, $A_{n+1} = A_n (1+g), \\forall n = 1 \\dots N$\n\nThere are other notations in use, e.g. actuarial notation.\n\n![By Delimata - Own work, GFDL, https://commons.wikimedia.org/w/index.php?curid=4312450](https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Actuarial_notation.svg/219px-Actuarial_notation.svg.png){width=20% }\n\n## Factor Notation\n\n+ It is a short-hand for the closed form representations of present and future worth for the common patterns\n+ Example\n    $$10(P|A, i= 10\\%, 5) = 10 \\left[ \\frac{(1 + .1)^5 -1}{.1 (1+.1)^5}\\right] = `r pgivena(10, .1, 5)`$$\n\nThe things in the parentheses are a substitute for the things in the square brackets.\n\n## Mostly overkill for this class but ...\n\n+ In the real world the problems are harder. http://web.pdx.edu/~woodsj/Teaching/PDC_PSU_revised%20final%20report_07-2009.pdf (Page 90).\n+ Explains the shapes better than the algebraic expression.\n+ Factor notation makes it easier to do parametric studies, i.e., Spider Graphs.\n\n## Sample Spider Graph\n\n![](http://tornadocharts.com/wp-content/uploads/sites/2/2015/06/sensit-sensitivity-analysis-spider-chart.gif)\n\n\n## The Key\n\n$$Looking~For = Number(Looking~For|What~is~number, i, How ~Long)$$\n\n+ A big list is here http://ec314-pdx-edu.wikidot.com/annotated-equations-sheet\n+ Hint, if you know $(P|X)$,  $(F|X) = (P|X) (1+r)^N$\n\n## Wait, closed form notation?\n\n+ Remember the tricks from sequences and series?  Many work for finite sequences.\n+ Closed form has advantage over brute force (We do that next) in that if you mess it up, it looks stupid. \n+ There are also tables of pre-calculated values which are useful for the PE exam.\n\n## Present Worth Three Ways\n```{r fig.width=3, fig.align='center', fig.height=1.5, message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y = 10 * c(0,1,1,1,1,1))\n# cf$x = 0:(length(cf$y) - 1)\n# print(ggplot(cf,aes(x,y,label = y)) + geom_bar(stat = \"Identity\",color = 'gray',fill = 'gray') + xlab(\"Period\") + ylab(\"Cash Flow\") + geom_text() + scale_y_discrete())\n# \n\nCF_Diagram(10 * c(0,1,1,1,1,1))\n\n\n```\n  + Brute force: $\\sum_{n=1}^{5} \\frac{10}{(1+.1)^n}$\n  + Tabular: $10 * `r pgivena(1, .1, 5)`$\n  + Closed form: $10(P|A, i = 10\\%, 5) = 10 \\frac{( 1+.1)^5 - 1}{.1 (1+.1)^5}$ \n  + Either way you should get `r pgivena(10, .1, 5)`.  \n\n\n## Comments on Three Methods\n\n+ Brute force always works but when you make a mistake it hides.\n+ Now try $10(P|A, i =.1, 300)$ by brute force.\n+ Tables don't exist for all interest rates but it was way faster on the PE, which is a speed test.\n+ Closed form looks stupid if you have made a mistake, but easy to make a mistake.\n\nI tend to use brute force when it is five or fewer values.\n\n## Easy Cash Flow to Factor Notation\n\n```{r fig.width=3, fig.height=1.5, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y = c(0,1,1,1,1,1))\n# cf$x = 0:(length(cf$y) - 1)\n# print(ggplot(cf,aes(x,y,label = y)) + geom_bar(stat = \"Identity\",color = 'gray',fill = 'gray') + xlab(\"Period\") + ylab(\"Cash Flow\") + geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,1,1,1,1,1))\n\n```\nFind representation of Present Worth in factor notation\n\n## Answer\n```{r fig.width=3, fig.height=1.5, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,1,1,1,1,1))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,1,1,1,1,1))\n```\n\n+ Shape is constant series\n+ Length is 5, which you get by counting the number of non-zero elements.\n+ Height is 1, that the the A you are looking for. \n\n$$1 (P|A, i, 5)$$\n\n## Try this\n```{r fig.width=3, fig.height=1.5, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,1,2,3,4))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,1,2,3,4))\n```\n\n\n## Linear Gradient is Tricky\n```{r fig.width=3, fig.height=1.5, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,1,2,3,4))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,1,2,3,4))\n\n```\n\n+ Shape is linear gradient\n+ Length is 5, count non-zeros and 'add one for the pot'. If zero is the start, period two is the first time you see a non-zero value.\n+ G, is 1, how much it changes by from period to period\n\n$$ 1(P|G,i,5)$$\n\n## The Geometric Gradient is for growth.\n\n```{r fig.width=3, fig.height=1.5, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,40,20,10,5,2.5))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,40,20,10,5,2.5))\n```\n\n$$ 40(P|A_1,i, g =- 50\\%, 5)$$\n\n## Geometric Gradient\n\n+ Pretty common in the wild.\n+ I tend to give easy g values, 100\\%, -50\\%, 10%, that are easy to spot graphically.\n+ Two closed form equations.\n\n$$P=A_{1}\\left(\\frac{1-(1+g)^{N}(1+i)^{-N}}{i-g}\\right)$$\n\n$$P=A_{1}\\left(\\frac{N}{1+i}\\right)\\,(if : i = g)$$\n\n## Now lets put two things together\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,1,2,3,4) + c(0,4,4,4,4,4))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,1,2,3,4) + c(0,4,4,4,4,4))\n```\n\n## You should see this as\n```{r fig.width=3, fig.height=1.5, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,1,2,3,4) + c(0,4,4,4,4,4))\n# cf$x=0:(length(cf$y)-1)\n# cf$LG <- c(0,0,1,2,3,4)\n# cf$C <- c(0,4,4,4,4,4)\n# print(ggplot(cf,aes(x,C,label=C))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n# \n# print(ggplot(cf,aes(x,LG,label=LG))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,4,4,4,4,4))\n\nCF_Diagram(c(0,0,1,2,3,4))\n\n```\n\n\n## Following from above\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,1,2,3,4) + c(0,4,4,4,4,4))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,1,2,3,4) + c(0,4,4,4,4,4))\n```\n\n+ See the constant series that is 4 high and 5 long $4(P|A,i,5)$\n+ See the linear gradient that has G of 1 and is 5 long $1(P|G,i,5)$\n\n$$4(P|A,i,5)+ 1(P|G,i,5)$$\n\n## How about this. Single byte change\n\n```{r fig.width=3, fig.height=2, fig.align='center' , message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,1,2,3,4) - c(0,4,4,4,4,4))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,1,2,3,4) - c(0,4,4,4,4,4))\n\n```\n\n## You should see this\n```{r fig.width=3, fig.height=1.5, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,1,2,3,4) + c(0,4,4,4,4,4))\n# cf$x=0:(length(cf$y)-1)\n# cf$LG <- c(0,0,1,2,3,4)\n# cf$C <- -c(0,4,4,4,4,4)\n# print(ggplot(cf,aes(x,C,label=C))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n# \n# print(ggplot(cf,aes(x,LG,label=LG))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\n\nCF_Diagram(-c(0,4,4,4,4,4))\nCF_Diagram(c(0,0,1,2,3,4))\n```\n## Following from above\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,1,2,3,4) - c(0,4,4,4,4,4))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,1,2,3,4) - c(0,4,4,4,4,4))\n\n```\n\n+ See the constant series that is -4 high and 5 long $-4(P|A,i,5)$\n+ See the linear gradient that has G of 1 and is 5 long $1(P|G,i,5)$\n\n$$-4(P|A,i,5)+ 1(P|G,i,5)$$\n\n\n## Try this with only addition and subtraction\n\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,5,5,5,5,5,5,5) - c(0,5,5,5,0,0,0,0))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,5,5,5,5,5,5,5) - c(0,5,5,5,0,0,0,0))\n```\n\n## Should get this\n\n\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,5,5,5,5,5,5,5) - c(0,5,5,5,0,0,0,0))\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,5,5,5,5,5,5,5) - c(0,5,5,5,0,0,0,0))\n\n```\n\n$$5(P|A,i,7) - 5(P|A,i,3)$$\n\n## Time Shifting is easier\n\n$$ P = \\frac{F}{(1+i)^N}$$\n\n+ You can replace the F with anything to move the common shapes around.\n\n## Last example as time shift\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,0,0,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,0,0,5,5,5,5))\n\n```\n\n$$\\frac{5(P|A, i, 4)}{(1+i)^3}$$\n\n\n## Further out\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,0,0,0,0,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,0,0,0,0,5,5,5,5))\n```\n\n$$\\frac{5(P|A, i, 4)}{(1+i)^5}$$\n\n## Two ways of thinking about time shifting\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,0,0,0,0,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,0,0,0,0,5,5,5,5))\n\n```\n\n+ $\\frac{5(P|A, i, 4)}{(1+i)^5}$\n+ The the exponent is the time period just to the left of the series.\n+ The sum of the N and the exponent is equal to the last period you see the series. \n\n\n## Tricky one\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,0,0,-2,-4,-6,-8,-10) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,0,0,-2,-4,-6,-8,-10))\n\n```\n\n## You should see\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,0,0,-2,-4,-6,-8,-10) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,0,0,-2,-4,-6,-8,-10))\n```\n\n$$\\frac{-2(P|G,i, 6)}{(1+i)^2}$$\n\n## Warnings\n\n+ There is no unique factor representation of a cash flow.\n+ Some are easier to spot than others.\n+ Usually the story tells you the shape.\n    + Loan payments look like $(P|A)$\n    + Accelerator clauses look like $(P|A_1)$\n    \n## Same Problem Several Ways\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,1,2,3,4,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,1,2,3,4,5,5,5,5))\n\n```\n\nTry it with the linear gradient ending at time 4 and the constant series going from 5 to 8.\n\n## How did you do?\n\n```{r fig.width=3, fig.height=2, fig.align='center',  message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,1,2,3,4,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,1,2,3,4,5,5,5,5))\n```\n\n$$\\frac{1(P|G, i, 5)}{(1+i)^{-1}} + \\frac{5(P|A, i, 4)}{(1+i)^{4}}$$\n\n## Again\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,1,2,3,4,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,1,2,3,4,5,5,5,5))\n```\n\nTry it with the linear gradient ending at time 5 and the constant series going from 6 to 8.\n\n\n## How did you do?\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,1,2,3,4,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,1,2,3,4,5,5,5,5))\n```\n\n$$\\frac{1(P|G, i, 6)}{(1+i)^{-1}} + \\frac{5(P|A, i, 3)}{(1+i)^{5}}$$\n\n## Try the civil engineer's solution\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,1,2,3,4,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,1,2,3,4,5,5,5,5))\n\n\n```\n\nStack constant series like a layer cake. There is one that is one high from period 1 to 8.  Another that is one high from period 2 to 8 and so on.\n\n## Civil engineer's solution\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,1,2,3,4,5,5,5,5) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,1,2,3,4,5,5,5,5))\n\n\n```\n\n$$ \\frac{1(P|A, i, 8)}{(1+i)^0} + \\frac{1(P|A, i, 7)}{(1+i)^1} +\\frac{1(P|A, i, 6)}{(1+i)^2} + \\frac{1(P|A, i, 5)}{(1+i)^3} + \\frac{1(P|A, i, 4)}{(1+i)^4}$$\n\n\n## How about this?\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,12,10,8,6,4,2) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,12,10,8,6,4,2))\n\n```\n\nHint: $-2(P|G, i, 7)$ is wrong in many ways.\n\n## You should see it as\n\n```{r fig.width=3, fig.height=1.5, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,12,12,12,12,12,12) - c(0,0,0,2,4,6,8,10))\n# cf$x=0:(length(cf$y)-1)\n# cf$LG <- -c(0,0,0,2,4,6,8,10)\n# cf$C <- c(0,0,12,12,12,12,12,12)\n# print(ggplot(cf,aes(x,C,label=C))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n# \n# print(ggplot(cf,aes(x,LG,label=LG))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,12,12,12,12,12,12))\n\nCF_Diagram(-c(0,0,0,2,4,6,8,10))\n\n```\n\n## Solution\n\n$$\\frac{12(P|A, i, 6)}{(1+i)^1} + \\frac{-2 (P|G, i, 6)}{(1+i)^1}$$\n\n+ All Linear gradients start at zero. If they don't you have to include a constant series.\n+ Work by analogy from slope intercept form of a line.\n    + $Y=MX + b$\n    + $Y=(P|G)+(P|A)$\n    \n## Review\n\n+ Look for shapes constant, geometric gradient and linear gradient.\n\n+ Count for the N.  Remember to add one for the pot *only* on linear gradient.\n\n+ Sum of N and exponent is equal to the time period where you last see the cash flow\n\n+ Work the analogy with slope intercept form of a line.\n\n## Big Test\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(1,2,4,8,16,13,10,7,4,1) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_x_discrete())\n\nCF_Diagram(c(1,2,4,8,16,13,10,7,4,1))\n```\n\n## Big Test ( A Solution)\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n\nCF_Diagram(c(1,2,4,8,16,13,10,7,4,1))\n\n```\n\n$$ \\frac{1(P|A_1, i, g = 100\\%, 4)}{(1+i)^{-1}} + \\frac{16 (P|A, i, 6)}{(1+i)^3} - \\frac{3 (P|G, i, 6)}{(1+i)^3}$$\n\n\n## Similar problem\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(2,4,6,8,10,12,14,16,8,4,2,1) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(2,4,6,8,10,12,14,16,8,4,2,1))\n\n```\n\n## Similar problem (Solution)\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n\nCF_Diagram(c(2,4,6,8,10,12,14,16,8,4,2,1))\n\n```\n\n$$\\frac{2 (P|G, i, 8)}{ (1+i)^{-2}} + \\frac{16 (P|A_1, i, g = -50\\%, 5)}{(1+i)^6}$$\n\n## Lets go backwards. Find the intended cash flow for this.\n\n$$\\frac{5(P|A, i, 10)}{(1+i)^2} - \\frac{1 (P|G, i, 4)}{ (1+i)^ 4}$$\n\n## Solution\n\n```{r fig.width=3, fig.height=2, fig.align='center', message=FALSE, warning=FALSE}\n# library(ggplot2)\n# cf <- data.frame(y=c(0,0,0,5,5,5,5,5,5,5,5,5,5) - c(0,0,0,0,0,0,1,2,3,0,0,0,0) )\n# cf$x=0:(length(cf$y)-1)\n# print(ggplot(cf,aes(x,y,label=y))+geom_bar(stat=\"Identity\",color='gray',fill='gray')+xlab(\"Period\")+ylab(\"Cash Flow\")+geom_text() + scale_y_discrete())\n\nCF_Diagram(c(0,0,0,5,5,5,5,5,5,5,5,5,5) - c(0,0,0,0,0,0,1,2,3,0,0,0,0) )\n```\n\n## Hints for Study\n\n+ Kill trees. Work lots of problems.  Everything after this depends on understanding TVM.\n+ Drill and Kill the examples and the videos at bottom of the page. http://ec314-pdx-edu.wikidot.com/q2:time-value-of-money\n+ When evaluating these expressions, try to do all the work in the calculator in one operation.  Sometimes rounding and truncation errors are bad with large interest rates.\n+ Go forwards, factor notation to cash flow diagram, and backwards, cash flow to factor.\n\n\n",
    "created" : 1508880274872.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3658421745",
    "id" : "128A2342",
    "lastKnownWriteTime" : 1508882269,
    "last_content_update" : 1508882269776,
    "path" : "~/Teaching/PSU-EC314/TVMAndLoans/TimeValueOfMoney.Rmd",
    "project_path" : "TVMAndLoans/TimeValueOfMoney.Rmd",
    "properties" : {
        "docOutlineSize" : "215",
        "docOutlineVisible" : "1",
        "ignored_words" : "http,ec,pdx,edu,wikidot,Refi,refi,beamer,frac,pre,ths,woodsj,pdf\n",
        "last_setup_crc32" : ""
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}